{
  "kind": "build_request",
  "title": "Add a role string field to each Player record (default empty)",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-10",
      "text": "Add a new field named `role` of type `Text` to the backend `Player` record stored in each room, with a default value of the empty string (`\"\"`) for newly created and newly joined players.",
      "target": "backend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "Add a new field called \"role\" to each player inside the room database.\n\nThe role field should be a string.\n\nDefault value should be empty.\n\nDo not change anything else."
        ]
      },
      "acceptanceCriteria": [
        "`backend/main.mo` `type Player` includes `role : Text`.",
        "`createRoom` initializes the host player with `role = \"\"`.",
        "`joinRoom` initializes the joining player with `role = \"\"`.",
        "No other backend behavior changes (room creation/join/start game/chat/state APIs behave the same aside from the additional field being present in returned `RoomState`)."
      ]
    },
    {
      "id": "REQ-11",
      "text": "Update generated frontend/backend type bindings (as needed) so the frontend compiles with the updated `Player` type that now includes the `role` field, without introducing any new UI behavior or user-facing text.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "Do not change anything else."
        ]
      },
      "acceptanceCriteria": [
        "TypeScript compilation succeeds after the backend `Player` type changes.",
        "No new screens, components, or visible UI changes are introduced; the app renders and functions as before."
      ]
    }
  ],
  "constraints": [
    "Keep the backend as a single Motoko actor in `backend/main.mo`.",
    "Do not introduce any new gameplay logic (e.g., role assignment rules) beyond adding the `role` field with an empty-string default.",
    "Do not modify any user-facing text."
  ],
  "nonGoals": [
    "Implementing the full role system (Anchor/personality cards) or any secret-role visibility rules.",
    "Changing room phases or navigation behavior.",
    "Adding any new frontend display of the `role` field."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}